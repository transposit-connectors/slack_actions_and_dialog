{
  "v2": {
    "transposit": {
      "dependencies": [{
        "name": "transposit/slack:v1.*.*",
        "alias": "slack"
      }, {
        "name": "transposit/slack:v1.*.*",
        "alias": "slackbot"
      }],
      "operations": [{
        "id": "post_confirmation",
        "tql": {
          "parameters": [{
            "name": "userid",
            "type": "STRING"
          }, {
            "name": "message",
            "type": "STRING"
          }, {
            "name": "url",
            "type": "STRING"
          }, {
            "name": "poster",
            "type": "STRING"
          }, {
            "name": "importance",
            "type": "STRING"
          }],
          "tql": "SELECT * FROM slackbot.post_chat_message\n  WHERE $body=(SELECT {\n  \t'link_names' : true,\n    'channel' : @userid,\n  \t'as_user' : true,\n    'attachments' : [\n     {\n       'title': 'Message clipped!',\n       -- This should be the link in the ClipIt web app\n       'title_link': @url,\n       'fields': [\n         {\n           'title': 'Message',\n           'value': @message\n         },\n         {\n           'title': 'Posted by',\n           'value': @poster,\n           'short': true\n         },\n         {\n           'title': 'Importance',\n           'value': @importance,\n           'short': true\n         },\n       ],\n     },\n   ]\n  })\n"
        }
      }, {
        "id": "id_to_name",
        "tql": {
          "parameters": [{
            "name": "id",
            "type": "STRING"
          }],
          "tql": "SELECT user.name FROM slackbot.get_users_info\n  WHERE user=@id\n\n/*\n * For sample code and reference material, visit\n * https://www.transposit.com/docs/get-started/sql-quickstart\n */"
        }
      }, {
        "id": "open_dialog",
        "tql": {
          "parameters": [{
            "name": "trigger_id",
            "type": "STRING"
          }, {
            "name": "message",
            "type": "STRING"
          }, {
            "name": "name",
            "type": "STRING"
          }],
          "tql": "SELECT * FROM slackbot.open_dialog\n  WHERE $body=(SELECT {\n    'dialog' : {\n      'title': 'Save it to ClipIt!',\n      'callback_id': 'clipit',\n      'submit_label': 'ClipIt',\n      'elements': [\n         {\n           'label': 'Message Text',\n           'type': 'textarea',\n           'name': 'message',\n           'value': @message\n         },\n         {\n           'label': 'Posted by',\n           'type': 'text',\n           'name': 'send_by',\n           'value': @name\n         },\n         {\n           'label': 'Importance',\n           'type': 'select',\n           'name': 'importance',\n           'value': 'Medium üíé',\n           'options': [\n             { 'label': 'High', value: 'High üíéüíé‚ú®' },\n             { 'label': 'Medium', value: 'Medium üíé' },\n             { 'label': 'Low', value: 'Low ‚ö™Ô∏è' }\n           ],\n         },\n      ]\n    },\n    'trigger_id' : @token\n  })\n\n/*\n * For sample code and reference material, visit\n * https://www.transposit.com/docs/get-started/sql-quickstart\n */"
        }
      }, {
        "id": "clipit_dialog",
        "function": {
          "parameters": [{
            "name": "http_event",
            "default": {
              "text": "{\"http_method\": \"GET\", \"query_parameters\": {}, \"headers\": {}, \"body\": \"\"}"
            },
            "type": "OBJECT"
          }],
          "js": "webhook.js"
        },
        "access": {
          "requireApiKey": true,
          "webhook": true
        }
      }, {
        "id": "clipit_confirmation",
        "function": {
          "parameters": [{
            "name": "http_event",
            "default": {
              "text": "{\"http_method\": \"GET\", \"query_parameters\": {}, \"headers\": {}, \"body\": \"\"}"
            },
            "type": "OBJECT"
          }],
          "js": "clipit_confirmation.js"
        },
        "access": {
          "requireApiKey": true,
          "webhook": true
        }
      }],
      "dataConnections": [{
        "ref": "slackbot.raw",
        "overrides": {
          "swagger": {
            "oauthConfig": {
              "scope": "bot,commands,chat:write:bot,users:read",
              "accessTokenPath": "bot.access_token"
            },
            "executionLimits": {
            }
          }
        }
      }],
      "javascriptAPIVersion": "3",
      "source": "src",
      "userSettingsDisplay": "GENERATED"
    }
  }
}